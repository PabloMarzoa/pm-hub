@if (skeleton) {
	<pmds-cdk-calendar-skeleton [dataQA]="dataQA + componentSelector" />
} @else {
	<section
		[attr.data-qa-id]="dataQA + componentSelector + 'section'"
		[ngClass]="{
			'tablet:w-[704px]': showEvents,
			'tablet:w-[352px]': !showEvents
		}"
		class="flex flex-col mobile:w-[288px] desktop:w-[352px] h-fit tablet:h-[422px] rounded-pmds border border-color-border-default bg-color-surface-primary pb-4 tablet:pb-0">
		<!-- HEADER -->
		<section
			class="flex h-10 px-4 mobile:px-3 my-4 items-center justify-between w-full"
		>
			<pmds-cdk-text
				[dataQA]="dataQA + componentSelector + 'title-calendar-'"
				[text]="literals.title"
			/>
			<pmds-cdk-button
				buttonType="tertiary"
				[label]="literals.addEvent"
				[smallFit]="true"
				buttonSize="small"
				[dataQA]="dataQA + componentSelector + 'button-add-event-'"
				icon="pmicons-add-circle"
				(buttonClick)="addEvent.emit()"
			/>
		</section>
		<!-- END HEADER -->
		<section class="w-full flex flex-row xl:flex-col mobile:flex-col items-start">
			<!-- CALENDAR -->
			<section class="px-1 w-full text-color-text-primary font-body-s-regular">
				<!-- MONTH SELECTOR -->
				<div class="flex px-2 items-center justify-between">
					<div
						[attr.data-qa-id]="
							dataQA + componentSelector + 'year-selected'
						"
						class="font-headline-desktop-s-bold mobile:font-headline-mobile-s-bold"
					>
						{{ literals.month[monthSelected].substring(0, 3) }}
						{{ yearSelected }}
					</div>
					<div class="w-16 flex items-center justify-between">
						<pmds-cdk-button
							buttonType="tertiary"
							[smallFit]="true"
							buttonSize="small"
							[dataQA]="dataQA + componentSelector"
							icon="pmicons-chevron-left"
							(buttonClick)="changeMonthClick(-1)"
						/>
						<pmds-cdk-button
							buttonType="tertiary"
							[smallFit]="true"
							buttonSize="small"
							[dataQA]="dataQA + componentSelector"
							icon="pmicons-chevron-right-1px"
							(buttonClick)="changeMonthClick(1)"
						/>
					</div>
				</div>
				<!-- END MONTH SELECTOR -->
				<!-- WEEK DAYS -->
				<div class="text-center grid grid-cols-7 py-4">
					@for (weekDay of literals?.weekDay; track weekDay; let i = $index) {
						<div [attr.data-qa-id]="dataQA + componentSelector + 'pmds-cdk-calendar-week-day-' + i">
							{{ weekDay.substring(0, 1).toLocaleUpperCase() }}
						</div>
					}
				</div>
				<!-- END WEEK DAYS -->
				<!-- DAYS -->
				<section class="text-center grid grid-rows-5 grid-cols-7">
					@for (day of daysArray; track day.day; let i = $index) {
						<div class="flex items-center justify-center"
							 [style.gridColumn]="i === 0 ? firstDayOfMonthWeekday === 0 ? '7' : firstDayOfMonthWeekday : undefined">
							<div [attr.data-qa-id]="dataQA + componentSelector + 'pmds-cdk-calendar-day-' + i"
								class="w-8 h-8 mb-4 flex items-center justify-center cursor-pointer rounded-full"
								pmdsCdkCalendarDayClass
								[pmdsCdkCalendarDayClassDay]="day.day"
								[pmdsCdkCalendarDayClassMonth]="monthSelected"
								[pmdsCdkCalendarDayClassYear]="yearSelected"
								[pmdsCdkCalendarDayClassSelectedDates]="selectedDates"
								(click)="selectDay(day.day)">
								<div>{{ day.day }}</div>
								<section class="absolute flex gap-1 pt-10">
									@for (event of day.events; track event.eventTitle) {
										<div class="w-1 h-1 rounded"
											 [ngClass]="{
											'bg-color-support-10': event.eventType === 'CONFIRMED',
											'bg-color-support-08': event.eventType === 'PENDING',
											'bg-color-support-06': event.eventType === 'SETTLED',
											'bg-color-support-02': event.eventType === 'CUSTOM',
										}">
										</div>
									}
								</section>
							</div>
						</div>
					}
				</section>
				<!-- DAYS -->
				<!-- TODAY BUTTON -->
				<section
					class="flex justify-center w-full py-4"
					[ngClass]="{
						'pb-0': !showEvents
					}"
				>
					<pmds-cdk-button
						[dataQA]="dataQA + componentSelector"
						[label]="literals.today"
						buttonType="tertiary"
						buttonSize="small"
						[smallFit]="true"
						(buttonClick)="selectToday()"
					></pmds-cdk-button>
				</section>
				<!-- END TODAY BUTTON -->
			</section>
			<!-- END CALENDAR -->
			@if (showEvents) {
				<!-- DIVIDER -->
				<section class="tablet:w-[1px] w-full tablet:px-0 tablet:pb-4 px-4 mobile:px-3 overflow-hidden tablet:h-[346px]">
					<div class="bg-color-border-default tablet:h-full h-[1px]"></div>
				</section>
				<!-- END DIVIDER -->
					<!-- EVENTS -->
				<section class="w-full">
					<pmds-cdk-events
						(selectEvent)="selectEvent.emit($event)"
						[events]="eventsShow"
						[dataQA]="dataQA + componentSelector"
						[noEventsLiteral]="literals.withoutEvents"
					/>
				</section>
				<!-- END EVENTS -->
			}
		</section>
	</section>
}
