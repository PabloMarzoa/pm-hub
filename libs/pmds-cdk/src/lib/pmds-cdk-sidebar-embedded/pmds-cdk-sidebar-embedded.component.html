<section
	#section
	[attr.data-qa-id]="dataQA + componentSelector + 'section'"
	class="w-full h-full flex tablet:flex-col justify-between items-start z-10 relative"
>
	<!-- PRINCIPAL SECTION -->
	<section
		[style.max-height]="sidebarHeight"
		class="flex-grow bg-color-background-default overflow-y-auto tablet:w-full mobile:w-full mx-auto max-w-[1224px] px-4 tablet:px-8 desktop:px-0"
	>
		<ng-content></ng-content>
	</section>
	<!-- END PRINCIPAL SECTION -->
	<!-- SIDEBAR EMBEDDED -->
	<section
		[style.height]="sidebarHeight"
		[ngClass]="{
			'w-0 min-w-0 tablet:max-h-[0] tablet:!h-0': !showSidebar,
			'w-1/3 border-l md:min-w-[28rem] tablet:border-t tablet:border-l-0 mobile:border-l-0 tablet:h-fit tablet:max-h-[50vh] mobile:w-full mobile:h-[100vh]': showSidebar,
		}"
		class="bg-color-surface-primary overflow-hidden relative flex flex-col justify-between border-color-border-default transition-all duration-500 mobile:fixed mobile:top-0 mobile:right-0 tablet:absolute tablet:bottom-0 tablet:w-full"
	>
		@if (!loading) {		 
			<section class="flex flex-col pt-6 pl-6 pr-7 pb-10">
				<section class="flex pb-2 justify-between w-full mobile:hidden">
					<!-- BACK BUTTON -->
					<div>
						<pmds-cdk-button
							buttonType="tertiary"
							[dataQA]="
								dataQA + componentSelector + 'back-button'
							"
							[label]="config.backButton.label"
							iconPosition="left"
							icon="pmicons-chevron-left"
							(buttonClick)="config.backButton.action()"
						/>
					</div>
					<!-- END BACK BUTTON -->
					<!-- CLOSE BUTTON -->
					<div>
						<pmds-cdk-button
							buttonType="tertiary"
							[dataQA]="
								dataQA + componentSelector + 'close-button'
							"
							icon="pmicons-close"
							(buttonClick)="showSidebar = !showSidebar"
						/>
					</div>
					<!-- CLOSE BUTTON -->
				</section>
				<section
					class="flex items-center justify-between mobile:hidden"
				>
					<!-- TITLE -->
					<span
						class="font-headline-desktop-l-regular text-color-text-primary"
						[attr.data-qa-id]="dataQA + componentSelector + 'title'"
						>{{ config.sidebarTitle }}</span
					>
					<!-- END TITLE -->
					<!-- HEADER BUTTONS -->
					<section class="flex gap-4">
						<pmds-cdk-button
							buttonType="tertiary"
							[label]="config.headerButton.labelButton1"
							[icon]="config.headerButton.iconButton1"
							[dataQA]="
								dataQA + componentSelector + 'header-button-1'
							"
							(buttonClick)="config.headerButton.actionButton1()"
						/>
						<pmds-cdk-button
							buttonType="tertiary"
							[label]="config.headerButton.labelButton2"
							[icon]="config.headerButton.iconButton2"
							[dataQA]="
								dataQA + componentSelector + 'header-button-2'
							"
							(buttonClick)="config.headerButton.actionButton2()"
						/>
					</section>
					<!-- END HEADER BUTTONS -->
				</section>
				<section
					class="md:hidden px-4 py-3 relative w-full text-center border-b border-color-border-default"
				>
					<!-- TITLE IN MOBILE -->
					<span
						class="font-headline-mobile-m-regular text-color-text-primary"
						[attr.data-qa-id]="dataQA + componentSelector + 'title'"
						>{{ config.sidebarTitle }}</span
					>
					<!-- END TITLE IN MOBILE -->
					<!-- CLOSE BUTTON IN MOBILE -->
					<div class="absolute right-4 top-3 flex gap-2">
						<section class="absolute -top-1 right-8">
							<pmds-cdk-button-dropdown
								type="tertiary"
								size="small"
								[smallFit]="true"
								[options]="[
									{
										label: config.headerButton.labelButton1,
										actionFn: config.headerButton.actionButton1
									},
									{
										label: config.headerButton.labelButton2,
										actionFn: config.headerButton.actionButton2
									}
								]"
							/>
						</section>
						<pmds-cdk-button
							buttonType="tertiary"
							icon="pmicons-close"
							[dataQA]="
								dataQA + componentSelector + 'close-button'
							"
							(buttonClick)="showSidebar = !showSidebar"
						/>
					</div>
					<!-- END CLOSE BUTTON IN MOBILE -->
				</section>
				<section
					class="mt-6 overflow-auto max-h-[72vh] mobile:max-h-[65vh]"
				>
					<!-- TEMPLATE FOR SIDEBAR -->
	
					<div>
						<ng-template #sidebarTemplate></ng-template>
					</div>
					<!-- END TEMPLATE FOR SIDEBAR -->
				</section>
			</section>
			<pmds-cdk-sticky-button-bar
				[dataQA]="dataQA + componentSelector + 'footer-buttons'"
				[buttons]="config.footerButtons"
			/>
		}
		<!-- LOADING SECTION -->
		 @if (loading) {		  
			 <section
				 class="relative h-screen tablet:h-[50vh] flex items-center justify-center"
			 >
				 <!-- CLOSE BUTTON -->
				 <div class="absolute top-6 right-6 mobile:top-4 mobile:right-4">
					 <pmds-cdk-button
						 buttonType="tertiary"
						 [dataQA]="dataQA + componentSelector + 'close-button'"
						 icon="pmicons-close"
						 (buttonClick)="showSidebar = !showSidebar"
					 />
				 </div>
				 <!-- END CLOSE BUTTON -->
				 <!-- LOADER -->
				 <pmds-cdk-loader
					 [isPrimary]="false"
					 [dataQA]="dataQA + componentSelector"
					 [title]="config.loaderLiterals.title"
					 [subtitle]="config.loaderLiterals.subtitle"
				 />
				 <!-- END LOADER -->
			 </section>
		 }
		<!-- END LOADING SECTION -->
	</section>
	<!-- END SIDEBAR EMBEDDED -->
</section>
